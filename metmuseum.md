
# ğŸ›ï¸ MetMuseum å›¾ç‰‡çˆ¬è™«ï¼ˆSelenium è‡ªåŠ¨åŒ–ç‰ˆï¼‰

> ä½¿ç”¨ Selenium è‡ªåŠ¨åŒ–ä» [å¤§éƒ½ä¼šè‰ºæœ¯åšç‰©é¦† (The Met Museum)](https://www.metmuseum.org/) æŠ“å–è‰ºæœ¯è—å“å›¾ç‰‡ä¸ç›¸å…³ä¿¡æ¯ï¼Œå¹¶ä¿å­˜ä¸º CSV æ–‡ä»¶ã€‚

---

## ğŸ“˜ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®åŸºäº **Selenium + Python 3** å®ç°ï¼Œè‡ªåŠ¨çˆ¬å– Met Museum è‰ºæœ¯è—å“æ£€ç´¢é¡µçš„å›¾ç‰‡ä¿¡æ¯ã€‚  
æ”¯æŒåˆ†æ­¥æ»šåŠ¨åŠ è½½ã€åˆ†é¡µç¿»é¡µã€Redis å»é‡ä¸çº¿ç¨‹å®‰å…¨ CSV å†™å…¥ã€‚

âœ… ç‰¹æ€§ï¼š
- è‡ªåŠ¨æœç´¢å¤šä¸ªå…³é”®è¯ï¼ˆä» tag æ–‡ä»¶è¯»å–ï¼‰  
- æ™ºèƒ½æ»šåŠ¨åŠ è½½ï¼Œè§¦å‘æ‡’åŠ è½½å›¾ç‰‡  
- è‡ªåŠ¨ç¿»é¡µç›´åˆ°æ— â€œä¸‹ä¸€é¡µâ€  
- è‡ªåŠ¨æå–æ ‡é¢˜ä¸åŸå›¾é“¾æ¥ï¼ˆè‡ªåŠ¨æ›¿æ¢ `mobile-large` â†’ `original`ï¼‰  
- Redis/å†…å­˜ å»é‡æœºåˆ¶  
- CSV æ–‡ä»¶å®‰å…¨å†™å…¥ï¼ˆæ”¯æŒæ–­ç‚¹ç»­å†™ï¼‰  
- è¯¦ç»†æ—¥å¿—è¾“å‡ºï¼Œæ–¹ä¾¿è¿½è¸ªä¸è°ƒè¯•  

---

## ğŸ§© ç¯å¢ƒä¾èµ–

### 1ï¸âƒ£ Python ç‰ˆæœ¬
- Python **3.8+**

### 2ï¸âƒ£ å¿…éœ€ä¾èµ–
å®‰è£…ä»¥ä¸‹åŒ…ï¼š

```bash
pip install selenium redis
````

> å»ºè®®ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚ `venv` æˆ– `conda`ï¼‰ã€‚

### 3ï¸âƒ£ Chrome æµè§ˆå™¨ä¸ ChromeDriver

* Chrome æµè§ˆå™¨ï¼ˆç‰ˆæœ¬éœ€ä¸ `chromedriver` åŒ¹é…ï¼‰
* ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ [ChromeDriver](https://chromedriver.chromium.org/downloads)

ç¤ºä¾‹è·¯å¾„ï¼ˆWindowsï¼‰ï¼š

```
C:\Program Files\Google\1\chromedriver-win32\chromedriver.exe
```

### 4ï¸âƒ£ å¯é€‰ä¾èµ–ï¼šRedis æœåŠ¡

* è‹¥å®‰è£… Redisï¼Œåˆ™è‡ªåŠ¨å¯ç”¨æŒä¹…åŒ–å»é‡åŠŸèƒ½ï¼›
* è‹¥æ—  Redisï¼Œä¼šè‡ªåŠ¨é€€å›ä¸ºå†…å­˜å»é‡ï¼ˆä»…é™å½“å‰è¿è¡Œå‘¨æœŸï¼‰ã€‚

Windows ä¸‹å¯ä½¿ç”¨ [Memurai](https://www.memurai.com/) æˆ– [Redis on WSL]ã€‚

---

## ğŸ“‚ é¡¹ç›®ç›®å½•ç»“æ„

```
metmuseum_spider/
â”‚
â”œâ”€â”€ metmuseum_spider.py      # ä¸»ç¨‹åºï¼ˆSelenium çˆ¬è™«ï¼‰
â”œâ”€â”€ README.md                # é¡¹ç›®è¯´æ˜æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ ram_tag_list.txt         # æœç´¢æ ‡ç­¾æ–‡ä»¶ï¼ˆæ¯è¡Œä¸€ä¸ªå…³é”®è¯ï¼‰
â””â”€â”€ output/
    â””â”€â”€ all_records_metmuseum_01.csv   # è¾“å‡ºç»“æœæ–‡ä»¶
```

---

## âš™ï¸ ä½¿ç”¨æ­¥éª¤

### 1ï¸âƒ£ å‡†å¤‡å…³é”®è¯æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `ram_tag_list.txt`ï¼Œæ¯è¡Œä¸€ä¸ªæ ‡ç­¾å…³é”®è¯ï¼Œä¾‹å¦‚ï¼š

```
painting
sculpture
Chaim Gross
Egyptian
```

---

### 2ï¸âƒ£ ç¼–è¾‘é©±åŠ¨ä¸è·¯å¾„é…ç½®

åœ¨ `metmuseum_spider.py` æ–‡ä»¶æœ«å°¾æ‰¾åˆ°ä»¥ä¸‹ä»£ç å—ï¼š

```python
if __name__ == '__main__':
    chrome_driver_path = r'C:\Program Files\Google\1\chromedriver-win32\chromedriver.exe'
    save_dir = r'D:\work\çˆ¬è™«\çˆ¬è™«æ•°æ®\metmuseum'
    tag_file_path = r'D:\work\çˆ¬è™«\ram_tag_list.txt'
```

æ ¹æ®ä½ çš„å®é™…æƒ…å†µä¿®æ”¹ï¼š

* âœ… `chrome_driver_path` â†’ ChromeDriver è·¯å¾„
* âœ… `save_dir` â†’ å›¾ç‰‡/CSV ä¿å­˜è·¯å¾„
* âœ… `tag_file_path` â†’ æ ‡ç­¾æ–‡ä»¶è·¯å¾„

---

### 3ï¸âƒ£ è¿è¡Œè„šæœ¬

åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œï¼š

```bash
python metmuseum_spider.py
```

ç¨‹åºå°†è‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. è¯»å–å…³é”®è¯åˆ—è¡¨ï¼›
2. æ‰“å¼€ MetMuseum æœç´¢é¡µï¼›
3. é€é¡µæ»šåŠ¨ã€åŠ è½½ã€æå–ï¼›
4. å†™å…¥ CSV æ–‡ä»¶ï¼›
5. è‡ªåŠ¨ç¿»é¡µè‡³ç»“æŸï¼›
6. å…³é—­æµè§ˆå™¨ã€‚

---

## ğŸ“¸ è¾“å‡ºç»“æœç¤ºä¾‹

è¾“å‡ºæ–‡ä»¶ï¼š`all_records_metmuseum_01.csv`

| Title          | ImageName    | URL                                                                                                                                | Tag         |
| -------------- | ------------ | ---------------------------------------------------------------------------------------------------------------------------------- | ----------- |
| Women          | DP701752.jpg | [https://images.metmuseum.org/CRDImages/ma/original/DP701752.jpg](https://images.metmuseum.org/CRDImages/ma/original/DP701752.jpg) | Chaim Gross |
| Vase           | 1985.1.1.jpg | [https://images.metmuseum.org/CRDImages/as/original/1985.1.1.jpg](https://images.metmuseum.org/CRDImages/as/original/1985.1.1.jpg) | Chinese     |
| Statue of Isis | 19.2.3.jpg   | [https://images.metmuseum.org/CRDImages/eg/original/19.2.3.jpg](https://images.metmuseum.org/CRDImages/eg/original/19.2.3.jpg)     | Egyptian    |

---

## ğŸ§  æ ¸å¿ƒåŠŸèƒ½è¯¦è§£

### ğŸ”¹ 1. æ»šåŠ¨åŠ è½½é€»è¾‘

ä¸ºè§¦å‘æ‡’åŠ è½½å›¾ç‰‡ï¼Œæœ¬é¡¹ç›®é‡‡ç”¨ï¼š

* æ¯æ¬¡æ»šåŠ¨å›ºå®šåƒç´  (`1080px`)
* æ£€æµ‹é¡µé¢é«˜åº¦å˜åŒ–
* è¿ç»­ 2 æ¬¡æ— å˜åŒ–åˆ™åœæ­¢
* æœ€å¤§ 80 æ¬¡æ»šåŠ¨ä¸Šé™ä¿æŠ¤

âœ… å…¼å®¹ MetMuseum ç›®å‰çš„ç€‘å¸ƒæµåŠ è½½æœºåˆ¶ã€‚

---

### ğŸ”¹ 2. ç¿»é¡µé€»è¾‘

* è‡ªåŠ¨è¯†åˆ«å¹¶ç‚¹å‡» â€œNext Pageâ€ æŒ‰é’®ï¼š

  ```html
  <button aria-label="Next Page"> ... </button>
  ```
* æ£€æµ‹æŒ‰é’®ç¦ç”¨æˆ–ä¸å­˜åœ¨å³åœæ­¢ç¿»é¡µï¼›
* å…¼å®¹éƒ¨åˆ†é¡µé¢ç»“æ„å˜åŒ–ï¼ˆaria-label å« "Next" çš„æƒ…å†µï¼‰ã€‚

---

### ğŸ”¹ 3. å»é‡æœºåˆ¶

ä¸¤ç§æ¨¡å¼ï¼š

| æ¨¡å¼         | æ˜¯å¦å¯ç”¨ Redis | æ•°æ®æŒä¹…åŒ– | æ¨è   |
| ---------- | ---------- | ----- | ---- |
| âœ… Redis æ¨¡å¼ | æ˜¯          | æ˜¯     | æœ€ä½³æ€§èƒ½ |
| âš™ï¸ å†…å­˜æ¨¡å¼    | å¦          | å¦     | ç®€æ˜“ä½¿ç”¨ |

ä½¿ç”¨ Redisï¼š

```bash
redis-server
```

---

### ğŸ”¹ 4. å›¾ç‰‡ URL æ¸…æ´—é€»è¾‘

MetMuseum å›¾ç‰‡å¸¸è§ä¸ºï¼š

```
https://images.metmuseum.org/CRDImages/as/mobile-large/11_7_3.JPG
```

è‡ªåŠ¨æ›¿æ¢ä¸ºåŸå›¾ï¼š

```
https://images.metmuseum.org/CRDImages/as/original/11_7_3.JPG
```

åŒæ—¶å…¼å®¹å…¶ä»–è·¯å¾„å‰ç¼€ï¼š
`web-large`, `medium`, `small`, `thumb`ã€‚

---

### ğŸ”¹ 5. CSV å†™å…¥æœºåˆ¶

* å¤šçº¿ç¨‹å®‰å…¨ï¼ˆ`threading.Lock`ï¼‰ï¼›
* è‡ªåŠ¨å†™å…¥è¡¨å¤´ï¼›
* é‡‡ç”¨ `utf-8-sig` é˜²æ­¢ Excel ä¹±ç ï¼›
* æ–‡ä»¶æ–­ç‚¹ç»­å†™ï¼ˆä¸ä¼šé‡å¤å†™å…¥ï¼‰ã€‚

---

## ğŸ§° è°ƒè¯•ä¸ä¼˜åŒ–å»ºè®®

| ç›®æ ‡       | æ“ä½œå»ºè®®                    |
| -------- | ----------------------- |
| æŸ¥çœ‹çœŸå®é¡µé¢è¡Œä¸º | å°† `use_headless=False`  |
| æé«˜é€Ÿåº¦     | å¯ç¦ç”¨å›¾ç‰‡åŠ è½½ã€å¢åŠ  `prefs` å‚æ•°   |
| ä¸‹è½½åŸå›¾     | å¯æ‰©å±•ä½¿ç”¨ `requests` æ¨¡å—æ‰¹é‡ä¸‹è½½ |
| é¿å…å°ç¦     | æ¯æ¬¡æœç´¢æˆ–ç¿»é¡µåå¢åŠ éšæœºå»¶æ—¶ `2~5 ç§’`  |
| æ–­ç‚¹ç»­çˆ¬     | Redis æ¨¡å¼ä¸‹æ”¯æŒæ–­ç‚¹ç»­çˆ¬ï¼Œä¸ä¼šé‡å¤å†™å…¥  |

---

## âš ï¸ å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰

### â“ 1. ç¨‹åºå¡åœ¨é¡µé¢åŠ è½½ï¼Ÿ

* æ£€æŸ¥ ChromeDriver ç‰ˆæœ¬ä¸æµè§ˆå™¨æ˜¯å¦åŒ¹é…ï¼›
* è‹¥ MetMuseum æ”¹ç‰ˆï¼Œå¯é‡æ–°æ›´æ–°å®¹å™¨é€‰æ‹©å™¨ï¼š

  ```python
  self.main_container_selector = 'section.object-grid_grid__hKKqs figure.collection-object_collectionObject__SuPct'
  ```

### â“ 2. Redis è¿æ¥å¤±è´¥ï¼Ÿ

* å¯åŠ¨ Redis æœåŠ¡åé‡è¯•ï¼›
* æˆ–å…³é—­ Redis è‡ªåŠ¨é€€å›å†…å­˜æ¨¡å¼ã€‚

### â“ 3. CSV æ— å†…å®¹ï¼Ÿ

* ç¡®è®¤å…³é”®è¯æœ‰æœç´¢ç»“æœï¼›
* æˆ–é¡µé¢åŠ è½½æ—¶é—´ä¸è¶³ï¼Œå¯é€‚å½“å¢åŠ ç­‰å¾…ç§’æ•°ã€‚

---

## ğŸ§© æ‰©å±•åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰

> ä»¥ä¸‹ä¸ºæœªæ¥å¯æ‹“å±•æ¨¡å—ï¼š

* [ ] å›¾ç‰‡ä¸‹è½½åŠŸèƒ½ï¼ˆrequests + å¤šçº¿ç¨‹ï¼‰
* [ ] MongoDB æ•°æ®å­˜å‚¨
* [ ] è‡ªåŠ¨å¼‚å¸¸æˆªå›¾ä¿å­˜
* [ ] CLI å‘½ä»¤è¡Œå‚æ•°æ”¯æŒ
* [ ] Docker éƒ¨ç½²ç¯å¢ƒ

---

## ğŸ§‘â€ğŸ’» ä½œè€…ä¿¡æ¯

ğŸ‘¨â€ğŸ’» **Selenium Master: Seleniumï¼ˆAI ä»£ç åŠ©æ‰‹ï¼‰**
ğŸ“ ä¸“ç²¾äº Web è‡ªåŠ¨åŒ– / åŠ¨æ€é¡µé¢è§£æ / å¤šçº¿ç¨‹çˆ¬è™«
ğŸ“¬ æ¬¢è¿æäº¤ Issue æˆ– Pull Request ä¼˜åŒ–è„šæœ¬ï¼

---

## ğŸªª License

æœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ ä¸ç ”ç©¶ï¼Œ**ç¦æ­¢ç”¨äºä»»ä½•å•†ä¸šç”¨é€”**ã€‚
å¦‚éœ€æ‰¹é‡ä¸‹è½½æˆ–ä½¿ç”¨ MetMuseum å›¾ç‰‡ï¼Œè¯·éµå®ˆå…¶å®˜æ–¹ç½‘ç«™çš„ç‰ˆæƒå£°æ˜ã€‚

