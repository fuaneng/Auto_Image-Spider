
# ğŸ“¸ Girlstop ä½œå“é›†çˆ¬è™«

## ğŸš€ é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ Python ç¼–å†™çš„ä¸“ä¸šç½‘ç»œçˆ¬è™«ï¼Œä¸“ç”¨äºæŠ“å–ç‰¹å®šç½‘ç«™ï¼ˆ`en.girlstop.info`ï¼‰ä¸Šæ¨¡ç‰¹çš„ä½œå“é›†ä¿¡æ¯å’ŒåŸå§‹å›¾ç‰‡ã€‚

é¡¹ç›®é‡‡ç”¨äº†å…ˆè¿›çš„åçˆ¬è™«æŠ€æœ¯ **`undetected-chromedriver` (uc)** æ¥åº”å¯¹å¤æ‚çš„ Cloudflare æˆ–çœŸäººéªŒè¯æœºåˆ¶ï¼Œå¹¶ä½¿ç”¨ **çº¿ç¨‹æ± ï¼ˆ`ThreadPoolExecutor`ï¼‰** å®ç°å›¾ç‰‡çš„å¼‚æ­¥å¹¶è¡Œä¸‹è½½ï¼Œæå¤§åœ°æé«˜äº†æ•ˆç‡å’ŒæˆåŠŸç‡ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

* **é«˜çº§åçˆ¬è™« (uc):** ä½¿ç”¨ `undetected-chromedriver` ç»•è¿‡å¸¸è§çš„ Selenium æ£€æµ‹å’Œ Cloudflare éªŒè¯ã€‚
* **çµæ´»çš„æµè§ˆå™¨é…ç½®:** æ”¯æŒæŒ‡å®šè‡ªå®šä¹‰ Chrome/Chromium æµè§ˆå™¨è·¯å¾„å’Œç‰ˆæœ¬å·ã€‚
* **è§£è€¦å¼å¼‚æ­¥ä¸‹è½½:** çˆ¬å–å’Œä¸‹è½½ä»»åŠ¡å®Œå…¨è§£è€¦ï¼Œé€šè¿‡çº¿ç¨‹æ± å¹¶è¡Œå¤„ç†å›¾ç‰‡ä¸‹è½½ï¼Œæ˜¾è‘—æé«˜æ•ˆç‡ã€‚
* **æ•°æ®æŒä¹…åŒ–:** æŠ“å–åˆ°çš„å›¾ç‰‡ URL å’Œå…ƒæ•°æ®å†™å…¥ CSV æ–‡ä»¶ã€‚
* **åˆ†ç±»å­˜å‚¨:** è‡ªåŠ¨åˆ›å»ºä»¥ `[æ¨¡ç‰¹å]/[ä½œå“é›†æ ‡é¢˜]` å‘½åçš„å­æ–‡ä»¶å¤¹ï¼Œå°†å›¾ç‰‡åˆ†ç±»å­˜å‚¨ã€‚
* **å»é‡æœºåˆ¶:** æ”¯æŒä½¿ç”¨ Redis æˆ–å†…å­˜é›†åˆè¿›è¡Œ URL å»é‡ï¼Œé¿å…é‡å¤æŠ“å–å’Œä¸‹è½½ã€‚
* **ä¸‹è½½å¼€å…³:** é€šè¿‡é…ç½®å¸¸é‡è½»æ¾å¯ç”¨æˆ–ç¦ç”¨å›¾ç‰‡ä¸‹è½½åŠŸèƒ½ã€‚

## âš™ï¸ ç¯å¢ƒé…ç½®

### 1. è½¯ä»¶ä¾èµ–

ç¡®ä¿ä½ çš„ç³»ç»Ÿä¸­å®‰è£…äº† **Python 3.8+** å’Œ **Google Chrome æµè§ˆå™¨**ã€‚

### 2. Python ä¾èµ–å®‰è£…

ä½¿ç”¨ `pip` å®‰è£…é¡¹ç›®æ‰€éœ€çš„åº“ï¼š

```bash
pip install undetected-chromedriver selenium beautifulsoup4 requests redis
````

### 3\. Redis æœåŠ¡ (å¯é€‰)

æœ¬é¡¹ç›®é»˜è®¤å¯ç”¨ Redis è¿›è¡Œé«˜æ•ˆå»é‡ã€‚å¦‚æœä¸éœ€è¦ï¼Œè¯·åœ¨ä»£ç ä¸­ç¦ç”¨ Redis æˆ–ç¡®ä¿ä½ æœ¬åœ°è¿è¡Œäº† Redis æœåŠ¡ï¼ˆé»˜è®¤ç«¯å£ `6379`ï¼‰ã€‚

## ğŸ“ é…ç½®æ–‡ä»¶ä¿®æ”¹

åœ¨è¿è¡Œè„šæœ¬å‰ï¼Œè¯·åŠ¡å¿…ä¿®æ”¹ `girlstop_spider.py` æ–‡ä»¶é¡¶éƒ¨çš„é…ç½®å¸¸é‡ï¼Œä»¥é€‚é…ä½ çš„æœ¬åœ°ç¯å¢ƒå’Œéœ€æ±‚ã€‚

| å¸¸é‡åç§° | æè¿° | **å¿…é¡»ä¿®æ”¹** | ç¤ºä¾‹å€¼ |
| :--- | :--- | :--- | :--- |
| `MODEL_NAME_FILE` | åŒ…å«è¦çˆ¬å–æ¨¡ç‰¹åç§°çš„ TXT æ–‡ä»¶è·¯å¾„ï¼ˆæ¯è¡Œä¸€ä¸ªåå­—ï¼‰ã€‚ | æ˜¯ | `R:\...\model_name.txt` |
| `CSV_DIR_PATH` | CSV æ–‡ä»¶å’Œå›¾ç‰‡ä¸‹è½½çš„**æ ¹ç›®å½•**ã€‚ | æ˜¯ | `R:\...\en_girlstop_info` |
| `CUSTOM_BROWSER_PATH` | **Chrome æµè§ˆå™¨ `.exe` å¯æ‰§è¡Œæ–‡ä»¶çš„å®Œæ•´è·¯å¾„**ã€‚ | æ˜¯ | `C:\Program Files\...\chrome.exe` |
| `CHROME_MAIN_VERSION` | Chrome æµè§ˆå™¨çš„**ä¸»ç‰ˆæœ¬å·**ï¼ˆä¾‹å¦‚ï¼š`142`ï¼‰ã€‚ | æ˜¯ | `142` |
| `ENABLE_DOWNLOAD` | å›¾ç‰‡ä¸‹è½½åŠŸèƒ½çš„å¼€å…³ (`True` å¯ç”¨ / `False` ç¦ç”¨)ã€‚ | å¦ | `True` |
| `MAX_DOWNLOAD_WORKERS` | å¼‚æ­¥ä¸‹è½½ä½¿ç”¨çš„æœ€å¤§çº¿ç¨‹æ•°ã€‚ | å¦ | `10` |

> **æ³¨æ„ï¼š** å¦‚æœè®¾ç½® `CHROME_MAIN_VERSION` åé‡åˆ° `HTTP Error 404: Not Found`ï¼Œè¯·å°è¯•å°†ç‰ˆæœ¬å·é™ä½åˆ°æ›´ç¨³å®šçš„ç‰ˆæœ¬ï¼Œå¦‚ `120`ã€‚

## ğŸ’» ä½¿ç”¨æ–¹æ³•

### 1\. å‡†å¤‡æ¨¡ç‰¹åç§°æ–‡ä»¶

ç¡®ä¿ `MODEL_NAME_FILE` æŒ‡å®šçš„è·¯å¾„ä¸‹å­˜åœ¨ä¸€ä¸ª `.txt` æ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­æ¯è¡Œå†™ä¸€ä¸ªä½ æƒ³è¦çˆ¬å–çš„æ¨¡ç‰¹åç§°ã€‚

### 2\. è¿è¡Œçˆ¬è™«è„šæœ¬

åœ¨å‘½ä»¤è¡Œæˆ–ç»ˆç«¯ä¸­è¿è¡Œä¸»è„šæœ¬ï¼š

```bash
python girlstop_spider.py
```

### 3\. æ‰‹åŠ¨éªŒè¯ (ä»…é¦–æ¬¡)

ç¨‹åºå¯åŠ¨åï¼Œå¦‚æœç½‘ç«™è§¦å‘äº† Cloudflare ç­‰çœŸäººéªŒè¯ï¼Œç»ˆç«¯ä¼šæš‚åœå¹¶æç¤ºï¼š

```
âš ï¸ ç–‘ä¼¼æ£€æµ‹åˆ° Cloudflare æˆ–çœŸäººéªŒè¯é¡µé¢ï¼
è¯·åœ¨ Chrome æµè§ˆå™¨ä¸­**æ‰‹åŠ¨å®Œæˆ**çœŸäººéªŒè¯ã€‚
å®ŒæˆéªŒè¯åï¼Œ**ä¸è¦å…³é—­æµè§ˆå™¨**ï¼Œå›åˆ°æ­¤å¤„æŒ‰ Enter ç»§ç»­...
>>> æŒ‰ Enter é”®åç¨‹åºå°†å°è¯•ç»§ç»­æŠ“å–...
```

æ­¤æ—¶ï¼Œè¯·åˆ‡æ¢åˆ° Selenium å¯åŠ¨çš„æµè§ˆå™¨çª—å£ï¼Œæ‰‹åŠ¨å®ŒæˆéªŒè¯ï¼Œç„¶åå›åˆ°ç»ˆç«¯æŒ‰ä¸‹ `Enter` é”®ã€‚ç¨‹åºå°†ç»§ç»­æ‰§è¡Œã€‚

## ğŸ“‚ é¡¹ç›®è¾“å‡ºç»“æ„

è¿è¡Œå®Œæˆåï¼Œä½ çš„ `CSV_DIR_PATH` ç›®å½•ä¸‹å°†ç”Ÿæˆä»¥ä¸‹ç»“æ„ï¼š

```
R:\py\Auto_Image-Spider\Selenium\en_girlstop_info\
â”œâ”€â”€ girlstop_results.csv 
â”œâ”€â”€ [æ¨¡ç‰¹å A]
â”‚   â”œâ”€â”€ [ä½œå“é›†æ ‡é¢˜ A-1]
â”‚   â”‚   â”œâ”€â”€ p.avif
â”‚   â”‚   â””â”€â”€ 1.avif
â”‚   â””â”€â”€ [ä½œå“é›†æ ‡é¢˜ A-2]
â”‚       â””â”€â”€ p.avif
â””â”€â”€ [æ¨¡ç‰¹å B]
    â””â”€â”€ [ä½œå“é›†æ ‡é¢˜ B-1]
        â””â”€â”€ p.avif
```

## ğŸ› ï¸ æ ¸å¿ƒä»£ç ç»“æ„æ¦‚è§ˆ

| ç±»/æ–¹æ³• | èŒè´£æè¿° |
| :--- | :--- |
| `GirlstopSpider.__init__` | åˆå§‹åŒ– uc é©±åŠ¨ã€Redis/å†…å­˜å»é‡ã€çº¿ç¨‹æ± å’Œä¸‹è½½é˜Ÿåˆ—ã€‚ |
| `GirlstopSpider.run` | ä¸»æ§åˆ¶æµç¨‹ï¼šä¾æ¬¡æ‰§è¡Œçˆ¬å– -\> ç­‰å¾…å¼‚æ­¥ä¸‹è½½å®Œæˆã€‚ |
| `GirlstopSpider._safe_get_url` | ä½¿ç”¨ uc é©±åŠ¨è®¿é—® URLï¼ŒåŒ…å«æ‰‹åŠ¨é€šè¿‡ Cloudflare éªŒè¯çš„é€»è¾‘ã€‚ |
| `GirlstopSpider.extract_details_from_page` | è§£æè¯¦æƒ…é¡µ HTMLï¼Œæå–æ‰€æœ‰å›¾ç‰‡çš„ URLã€‚ |
| `GirlstopSpider.write_to_csv` | å°†å›¾ç‰‡å…ƒæ•°æ®å†™å…¥ CSVï¼Œå¹¶å°†ä¸‹è½½ä»»åŠ¡æ¨é€åˆ°é˜Ÿåˆ—ï¼ˆå¦‚æœå¯ç”¨ä¸‹è½½ï¼‰ã€‚ |
| `GirlstopSpider.download_worker` | **å¼‚æ­¥çº¿ç¨‹å‡½æ•°**ï¼šä»é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡ï¼Œæ‰§è¡Œå›¾ç‰‡ä¸‹è½½å’Œæ–‡ä»¶åˆ†ç±»å­˜å‚¨ã€‚ |
| `GirlstopSpider.is_url_visited` | Redis/å†…å­˜å»é‡é€»è¾‘ã€‚ |

```

---
